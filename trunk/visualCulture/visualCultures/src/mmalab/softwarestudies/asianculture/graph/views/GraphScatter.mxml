<?xml version="1.0" encoding="utf-8"?>
<s:Group xmlns:fx="http://ns.adobe.com/mxml/2009"
		 xmlns:s="library://ns.adobe.com/flex/spark"
		 xmlns:mx="library://ns.adobe.com/flex/halo"
		 width="300" height="300" >
	<fx:Style>
		@namespace s "library://ns.adobe.com/flex/spark";
		@namespace mx "library://ns.adobe.com/flex/halo";
		
		.itemrendererstyle {
			radius: 3;
			color: "0xFFFFFF";
			item-roll-over-color: "0xFFFF00";
			item-disabled-color: "0x00FF00";
			item-selection-color: "0x0000FF";
			
		}
		
	</fx:Style>
	<fx:Script>
		<![CDATA[
			import mmalab.softwarestudies.asianculture.data.models.Dataset;
			import mmalab.softwarestudies.asianculture.graph.events.SelectValueEvent;
			
			import mx.charts.AxisRenderer;
			import mx.charts.HitData;
			import mx.charts.LinearAxis;
			import mx.charts.series.items.PlotSeriesItem;
			import mx.events.FlexEvent;
			
			[Bindable]
			public var dataset:Dataset;
			[Bindable]
			public var selectedIdx:Array;
			[Bindable]
			public var statIdx:String;
			[Bindable]
			public var statIdy:String;
			
			private function barseries1_clickHandler(event:MouseEvent):void
			{
				var selectValueEvent:SelectValueEvent = new SelectValueEvent(SelectValueEvent.VALUE_SELECTED);
				selectValueEvent.selectedValues = series1.selectedIndices;
				dispatchEvent(selectValueEvent);
			}
			
			private function chart_dataTipFunction(item:HitData):String {
				var chartItem:PlotSeriesItem = item.chartItem as PlotSeriesItem;
				var str:String = chartItem.item.name as String;
				var tip:String = "<b>" + str.slice(0, str.lastIndexOf(".")) + "</b><br/>"
					+ "<b>" + statIdx + ":</b> " + chartItem.item[statIdx] + "<br/>"
					+ "<b>" + statIdy + ":</b> " + chartItem.item[statIdy];
				return tip;
			}
			
		]]>
	</fx:Script>

	<fx:Declarations>
		<!-- Define custom colors for use as plot point fills. -->
		<mx:SolidColor id="sc1" color="0x005500" alpha="1"/>
		<!-- Define custom Strokes. -->
		<mx:Stroke id="s1" color="green" weight="1"/>
	</fx:Declarations>
	
	<mx:PlotChart left="{0}" x="0" y="0" id="barchart1" selectionMode="multiple" width="100%" height="100%"
				  showDataTips="true" dataTipRenderer="{MyDataTip}" dataTipFunction="chart_dataTipFunction" dataTipMode="single"
				  mouseUp="barseries1_clickHandler(event)" dataProvider="{dataset.values}"  styleName="itemrendererstyle">
		<mx:verticalAxis>
			<mx:LinearAxis id="axisObj" title="{statIdy}" autoAdjust="true" baseAtZero="false" />
		</mx:verticalAxis>
		<mx:horizontalAxis>
			<mx:LinearAxis title="{statIdx}" autoAdjust="true" baseAtZero="false"/>
		</mx:horizontalAxis>
		<mx:series>
			<mx:PlotSeries id="series1" selectable="true" selectedIndices="{selectedIdx}" xField="{statIdx}" yField="{statIdy}"
						   itemRenderer="mx.charts.renderers.CircleItemRenderer" displayName="{statIdy}"
						   styleName="itemrendererstyle" fill="{sc1}" stroke="{s1}" />
		</mx:series>
	</mx:PlotChart>
</s:Group>